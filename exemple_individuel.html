<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les plus gros transferts par année</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

        body {
            background-color: #111111;
            color: #E0E0E0;
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 40px;
            width: 100%;
            max-width: 1400px;
            height: 90vh;
        }

        #display-area {
            background-color: #1e1e1e;
            border-left: 5px solid #FFFF00;
            padding: 15px;
            width: 350px;
            height: 350px; /* Hauteur fixe pour un meilleur alignement */
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border-radius: 10px;
            text-align: center;
            color: #AAAAAA;
            transition: background-color 0.3s ease;
        }

        #display-area img {
            max-width: 100%;
            max-height: 100%;
            display: block;
            border-radius: 5px;
        }

        .chart-container {
            flex-grow: 1;
            height: 100%;
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="display-area">
            </div>

        <div class="chart-container">
            <canvas id="transferChart"></canvas>
        </div>
    </div>

    <script>
        // Les données JSON des transferts
        const transferData = [
          { "ANNÉE": "2010/2011", "NOM": "Fernando Torres", "LIEN": "Cartes/2010.svg", "VENDEUR": "Liverpool ", "ACHETEUR": "Chelsea", " PRIX ": " 58,000,000.00 € " },
          { "ANNÉE": "2011/2012", "NOM": "Javier Pastore", "LIEN": "Cartes/2011.svg", "VENDEUR": "Palerme", "ACHETEUR": "Paris SG", " PRIX ": " 41,000,000.00 € " },
          { "ANNÉE": "2012/2013", "NOM": "Thiago Silva", "LIEN": "Cartes/2012.svg", "VENDEUR": "AC Milan", "ACHETEUR": "Paris SG", " PRIX ": " 42,000,000.00 € " },
          { "ANNÉE": "2013/2014", "NOM": "Gareth Bale", "LIEN": "Cartes/2013.svg", "VENDEUR": "Tottenham", "ACHETEUR": "Real Madrid", " PRIX ": " 101,000,000.00 € " },
          { "ANNÉE": "2014/2015", "NOM": "Luis Suarez", "LIEN": "Cartes/2014.svg", "VENDEUR": "Liverpool ", "ACHETEUR": "FC Barcelone", " PRIX ": " 81,720,000.00 € " },
          { "ANNÉE": "2015/2016", "NOM": "Kevin De Bruyne", "LIEN": "Cartes/2015.svg", "VENDEUR": "Wolfsburg", "ACHETEUR": "Man City", " PRIX ": " 76,000,000.00 € " },
          { "ANNÉE": "2016/2017", "NOM": "Paul Pogba", "LIEN": "Cartes/2016.svg", "VENDEUR": "Juventus", "ACHETEUR": "Man UTD", " PRIX ": " 101,000,000.00 € " },
          { "ANNÉE": "2017/2018", "NOM": "Neymar Jr", "LIEN": "Cartes/2017.svg", "VENDEUR": "FC Barcelone", "ACHETEUR": "Paris SG", " PRIX ": " 222,000,000.00 € " },
          { "ANNÉE": "2018/2019", "NOM": "Cristiano Ronaldo", "LIEN": "Cartes/2018.svg", "VENDEUR": "Real Madrid", "ACHETEUR": "Juventus", " PRIX ": " 117,000,000.00 € " },
          { "ANNÉE": "2019/2020", "NOM": "Joao Félix", "LIEN": "Cartes/2019.svg", "VENDEUR": "SL Benfica", "ACHETEUR": "Atletico Madrid", " PRIX ": " 127,000,000.00 € " },
          { "ANNÉE": "2020/2021", "NOM": "Jack Grealish", "LIEN": "Cartes/2020.svg", "VENDEUR": "Aston Villa", "ACHETEUR": "Man City", " PRIX ": " 117,500,000.00 € " },
          { "ANNÉE": "2022/2023", "NOM": "Enzo Fernandez", "LIEN": "Cartes/2022.svg", "VENDEUR": "SL Benfica", "ACHETEUR": "Chelsea", " PRIX ": " 121,000,000.00 € " },
          { "ANNÉE": "2023/2024", "NOM": "Jude Bellingham", "LIEN": "Cartes/2023.svg", "VENDEUR": "Dortmund", "ACHETEUR": "Real Madrid", " PRIX ": " 127,000,000.00 € " },
          { "ANNÉE": "2024/2025", "NOM": "Jhon Duran", "LIEN": "Cartes/2024.svg", "VENDEUR": "Aston Villa", "ACHETEUR": "Al Nassr", " PRIX ": " 77,000,000.00 € " },
          { "ANNÉE": "2025/2026", "NOM": "Alexander Isak", "LIEN": "Cartes/2025.svg", "VENDEUR": "Newcastle", "ACHETEUR": "Liverpool", " PRIX ": " 145,000,000.00 € " }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const displayArea = document.getElementById('display-area');

            const showDefaultMessage = () => {
                displayArea.innerHTML = '<p>Aucune date sélectionnée</p>';
            };

            const updateImage = (data) => {
                displayArea.innerHTML = `<img src="${data.LIEN}" alt="Transfert de ${data.NOM}">`;
            };
            
            const labels = transferData.map(item => item['ANNÉE'].split('/')[0]);
            const prices = transferData.map(item => parseFloat(item[' PRIX '].replace(/\s/g, '').replace('€', '').replace(/,/g, '')));

            const ctx = document.getElementById('transferChart').getContext('2d');
            
            let selectedIndex = -1; // Variable pour suivre l'index du point sélectionné

            const transferChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Montant du Transfert',
                        data: prices,
                        borderColor: '#FFFF00',
                        backgroundColor: 'rgba(255, 255, 0, 0.1)',
                        pointBackgroundColor: '#FFFFFF',
                        pointBorderColor: '#000000',
                        pointHoverBackgroundColor: '#FFFFFF',
                        pointHoverBorderColor: '#FFFF00',
                        pointRadius: 6,      // Rayon par défaut des points
                        pointHoverRadius: 8, // Rayon au survol
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'LES PLUS GROS TRANSFERTS PAR ANNÉE',
                            color: '#FFFF00',
                            font: { size: 22, weight: 'bold' }
                        },
                        tooltip: {
                            callbacks: {
                                label: context => `Montant : ${new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR' }).format(context.parsed.y)}`
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                color: '#AAAAAA',
                                callback: value => new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR', notation: 'compact' }).format(value)
                            },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#AAAAAA' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        }
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            // Récupère l'index du point cliqué
                            const newIndex = elements[0].index;
                            
                            // Si on ne change pas de point, on ne fait rien
                            if (newIndex === selectedIndex) return;

                            selectedIndex = newIndex;
                            const selectedData = transferData[selectedIndex];
                            
                            // Met à jour l'image
                            updateImage(selectedData);

                            // Met à jour la taille des points
                            // Crée un tableau de rayons : 10 pour le point sélectionné, 6 pour les autres
                            const pointRadii = transferData.map((_, index) => index === selectedIndex ? 10 : 6);
                            const pointHoverRadii = transferData.map((_, index) => index === selectedIndex ? 12 : 8);

                            // Applique les nouveaux rayons au graphique
                            transferChart.data.datasets[0].pointRadius = pointRadii;
                            transferChart.data.datasets[0].pointHoverRadius = pointHoverRadii;

                            // Met à jour le graphique pour afficher les changements
                            transferChart.update();
                        }
                    }
                }
            });

            // Affiche le message par défaut au chargement
            showDefaultMessage();
        });
    </script>
</body>
</html>